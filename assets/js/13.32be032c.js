(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{358:function(a,r,t){"use strict";t.r(r);var e=t(0),s=Object(e.a)({},(function(){var a=this,r=a.$createElement,t=a._self._c||r;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"制作-svg-地图轮廓"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#制作-svg-地图轮廓"}},[a._v("#")]),a._v(" 制作 svg 地图轮廓")]),a._v(" "),t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[a._v("#")]),a._v(" 前言")]),a._v(" "),t("p",[a._v("由于项目基于 amMap,有时需要使用中国某些省份或者市区作为地图，\n但是 ammap 没有提供相关的地图数据，官网提供了一个自制地图数据的文档，\n根据此文档，只要有地图的 GIS 数据，就可以制作出想要的地图。")]),a._v(" "),t("h2",{attrs:{id:"获取-gis-数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取-gis-数据"}},[a._v("#")]),a._v(" 获取 GIS 数据")]),a._v(" "),t("p",[a._v("网上搜索下载相关地区的 GIS 数据，一般下载下来会包含"),t("code",[a._v(".shp")]),a._v(","),t("code",[a._v(".shx")]),a._v(","),t("code",[a._v(".prj")]),a._v(","),t("code",[a._v(".dbf")]),a._v("等类型的文件，\n这里提供一份"),t("a",{attrs:{href:"https://www.ganghe.net/research/data/china-gis-data",target:"_blank",rel:"noopener noreferrer"}},[a._v("中国地图的 GIS 数据"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"截取需要的地图轮廓"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#截取需要的地图轮廓"}},[a._v("#")]),a._v(" 截取需要的地图轮廓")]),a._v(" "),t("p",[a._v("amMap 的文档提供了一些工具，不过安装有些麻烦，以前尝试过在 ubuntu 上安装，成功的截取过，\n后来换了 mac，有的依赖没能装上，而且那个用于截取的软件已经停止维护了，并推荐了另一个软件，\n"),t("a",{attrs:{href:"https://github.com/mbloch/mapshaper",target:"_blank",rel:"noopener noreferrer"}},[a._v("mapshaper"),t("OutboundLink")],1),a._v(", 这个软件有 GUI，用起来还不错。")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("把 GIS 数据导入到 mapshaper 中，如果是下载了上文的中国地图 GIS 数据，里面包含了 1，2，3\n不同精度的地图，根据需要的精度导入，笔者开发的时候，需要淄博市的轮廓，于是就导入等级 3 的地图数据")])]),a._v(" "),t("li",[t("p",[a._v("打开 console，通过命令获得需要的轮廓")]),a._v(" "),t("ul",[t("li",[a._v("过滤得到淄博的轮廓 "),t("code",[a._v('filter \'NAME_1 == "Shandong" && NAME_2 == "Zibo" && NAME_3 != "Gaoqing" || NAME_3 == "Zouping"\'')])]),a._v(" "),t("li",[a._v("清除淄博以外的区域 "),t("code",[a._v("mapshaper -clean")]),a._v("\n¯  - 由于不需要轮廓里面的线，只需要最外面那层轮廓，将里面的线移除 "),t("code",[a._v("mapshaper -dissolve")]),a._v(", "),t("code",[a._v("mapshaper -clean")])])])]),a._v(" "),t("li",[t("p",[a._v("导出成 svg 数据，到此已经得到一个淄博地图轮廓的 svg 了")])]),a._v(" "),t("li",[t("p",[a._v("由于要在 ammap 里用，使用 ammap 提供的"),t("a",{attrs:{href:"http://extra.amcharts.com/mapparser3/",target:"_blank",rel:"noopener noreferrer"}},[a._v("工具"),t("OutboundLink")],1),a._v("，\n获取 json 数据，这里获取的 json 数据就能用于 mamap 了")]),a._v(" "),t("ul",[t("li",[a._v("打开导出的 svg 文件，复制里面"),t("code",[a._v("<g>")]),a._v("标签的全部内容")]),a._v(" "),t("li",[a._v("导入到"),t("a",{attrs:{href:"http://extra.amcharts.com/mapparser3/",target:"_blank",rel:"noopener noreferrer"}},[a._v("amMap parser"),t("OutboundLink")],1),a._v("，获取到 json 数据")])])])]),a._v(" "),t("h2",{attrs:{id:"简化地图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简化地图"}},[a._v("#")]),a._v(" 简化地图")]),a._v(" "),t("p",[a._v("如果下载的地图数据很精细，导出时，可能会导出一个非常大的文件，但是太大的文件又可能不好处理，\n这时，可以利用mapshaper的"),t("code",[a._v("Simplify")]),a._v("的功能去简化地图，从而导出一个大小合适的地图。")]),a._v(" "),t("h2",{attrs:{id:"导出时增加信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#导出时增加信息"}},[a._v("#")]),a._v(" 导出时增加信息")]),a._v(" "),t("p",[a._v("一般GIS数据里包含了很多地图区域的信息，例如，东莞市这个区域，包含了这块区域是什么市，属于什么省份等信息，")]),a._v(" "),t("p",[a._v("但是当导出svg的时候，发现这些信息丢失了。可以通过在导出的时候，指定要包含的属性，这样导出的svg就能够包含")]),a._v(" "),t("p",[a._v("相关的属性信息了。简单的用法：")]),a._v(" "),t("ul",[t("li",[a._v("在mapshaper的右上角又一个"),t("code",[a._v("i")]),a._v("的按钮，点开此按钮有一个"),t("code",[a._v("data")]),a._v("选项，选择此选项后，悬浮在地图区域的时候\n就能看到此区域的相关属性信息")]),a._v(" "),t("li",[a._v("例如属性信息当中有一个id属性，那么当点击右上角"),t("code",[a._v("Export")]),a._v("的时候，在弹窗中有一个可以输入export options\n的输入框，可以输入"),t("code",[a._v("-o svg-data=id")]),a._v(", 然后导出，导出的svg中就会包含一个"),t("code",[a._v("data-id")]),a._v("的属性值")])]),a._v(" "),t("h2",{attrs:{id:"参考链接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[a._v("#")]),a._v(" 参考链接")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.amcharts.com/docs/v3/tutorials/creating-custom-maps-for-javascript-ammap/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Creating custom maps for JavaScript amMap(AmMap3)"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://www.amcharts.com/docs/v4/tutorials/creating-custom-maps/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Creating custom maps(AmMap4)"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://www.ganghe.net/research/data/china-gis-data",target:"_blank",rel:"noopener noreferrer"}},[a._v("中国 GIS 数据"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/mbloch/mapshaper",target:"_blank",rel:"noopener noreferrer"}},[a._v("mapshaper"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"http://extra.amcharts.com/mapparser3/",target:"_blank",rel:"noopener noreferrer"}},[a._v("amMap parser"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/mbloch/mapshaper/issues/199",target:"_blank",rel:"noopener noreferrer"}},[a._v("Additional attribute for SVG output #199"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);r.default=s.exports}}]);