import{r as a,o as e,c as r,a as o,F as t,d as n,b as l}from"./app.d3892aed.js";const p={},s=n('<h1 id="制作-svg-地图轮廓" tabindex="-1"><a class="header-anchor" href="#制作-svg-地图轮廓" aria-hidden="true">#</a> 制作 svg 地图轮廓</h1><h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言" aria-hidden="true">#</a> 前言</h2><p>由于项目基于 amMap,有时需要使用中国某些省份或者市区作为地图， 但是 ammap 没有提供相关的地图数据，官网提供了一个自制地图数据的文档， 根据此文档，只要有地图的 GIS 数据，就可以制作出想要的地图。</p><h2 id="获取-gis-数据" tabindex="-1"><a class="header-anchor" href="#获取-gis-数据" aria-hidden="true">#</a> 获取 GIS 数据</h2>',4),h=l("网上搜索下载相关地区的 GIS 数据，一般下载下来会包含"),i=o("code",null,".shp",-1),d=l(","),c=o("code",null,".shx",-1),u=l(","),m=o("code",null,".prj",-1),g=l(","),f=o("code",null,".dbf",-1),b=l("等类型的文件， 这里提供一份"),v={href:"https://www.ganghe.net/research/data/china-gis-data",target:"_blank",rel:"noopener noreferrer"},x=l("中国地图的 GIS 数据"),_=o("h2",{id:"截取需要的地图轮廓",tabindex:"-1"},[o("a",{class:"header-anchor",href:"#截取需要的地图轮廓","aria-hidden":"true"},"#"),l(" 截取需要的地图轮廓")],-1),w=l("amMap 的文档提供了一些工具，不过安装有些麻烦，以前尝试过在 ubuntu 上安装，成功的截取过， 后来换了 mac，有的依赖没能装上，而且那个用于截取的软件已经停止维护了，并推荐了另一个软件， "),S={href:"https://github.com/mbloch/mapshaper",target:"_blank",rel:"noopener noreferrer"},k=l("mapshaper"),G=l(", 这个软件有 GUI，用起来还不错。"),M=n("<li><p>把 GIS 数据导入到 mapshaper 中，如果是下载了上文的中国地图 GIS 数据，里面包含了 1，2，3 不同精度的地图，根据需要的精度导入，笔者开发的时候，需要淄博市的轮廓，于是就导入等级 3 的地图数据</p></li><li><p>打开 console，通过命令获得需要的轮廓</p><ul><li>过滤得到淄博的轮廓 <code>filter &#39;NAME_1 == &quot;Shandong&quot; &amp;&amp; NAME_2 == &quot;Zibo&quot; &amp;&amp; NAME_3 != &quot;Gaoqing&quot; || NAME_3 == &quot;Zouping&quot;&#39;</code></li><li>清除淄博以外的区域 <code>mapshaper -clean</code> ¯ - 由于不需要轮廓里面的线，只需要最外面那层轮廓，将里面的线移除 <code>mapshaper -dissolve</code>, <code>mapshaper -clean</code></li></ul></li><li><p>导出成 svg 数据，到此已经得到一个淄博地图轮廓的 svg 了</p></li>",3),q=l("由于要在 ammap 里用，使用 ammap 提供的"),I={href:"http://extra.amcharts.com/mapparser3/",target:"_blank",rel:"noopener noreferrer"},A=l("工具"),j=l("， 获取 json 数据，这里获取的 json 数据就能用于 mamap 了"),E=o("li",null,[l("打开导出的 svg 文件，复制里面"),o("code",null,"<g>"),l("标签的全部内容")],-1),N=l("导入到"),C={href:"http://extra.amcharts.com/mapparser3/",target:"_blank",rel:"noopener noreferrer"},Z=l("amMap parser"),y=l("，获取到 json 数据"),F=n('<h2 id="简化地图" tabindex="-1"><a class="header-anchor" href="#简化地图" aria-hidden="true">#</a> 简化地图</h2><p>如果下载的地图数据很精细，导出时，可能会导出一个非常大的文件，但是太大的文件又可能不好处理， 这时，可以利用mapshaper的<code>Simplify</code>的功能去简化地图，从而导出一个大小合适的地图。</p><h2 id="导出时增加信息" tabindex="-1"><a class="header-anchor" href="#导出时增加信息" aria-hidden="true">#</a> 导出时增加信息</h2><p>一般GIS数据里包含了很多地图区域的信息，例如，东莞市这个区域，包含了这块区域是什么市，属于什么省份等信息，</p><p>但是当导出svg的时候，发现这些信息丢失了。可以通过在导出的时候，指定要包含的属性，这样导出的svg就能够包含</p><p>相关的属性信息了。简单的用法：</p><ul><li>在mapshaper的右上角又一个<code>i</code>的按钮，点开此按钮有一个<code>data</code>选项，选择此选项后，悬浮在地图区域的时候 就能看到此区域的相关属性信息</li><li>例如属性信息当中有一个id属性，那么当点击右上角<code>Export</code>的时候，在弹窗中有一个可以输入export options 的输入框，可以输入<code>-o svg-data=id</code>, 然后导出，导出的svg中就会包含一个<code>data-id</code>的属性值</li></ul><h2 id="参考链接" tabindex="-1"><a class="header-anchor" href="#参考链接" aria-hidden="true">#</a> 参考链接</h2>',8),J={href:"https://www.amcharts.com/docs/v3/tutorials/creating-custom-maps-for-javascript-ammap/",target:"_blank",rel:"noopener noreferrer"},L=l("Creating custom maps for JavaScript amMap(AmMap3)"),O={href:"https://www.amcharts.com/docs/v4/tutorials/creating-custom-maps/",target:"_blank",rel:"noopener noreferrer"},U=l("Creating custom maps(AmMap4)"),V={href:"https://www.ganghe.net/research/data/china-gis-data",target:"_blank",rel:"noopener noreferrer"},z=l("中国 GIS 数据"),B={href:"https://github.com/mbloch/mapshaper",target:"_blank",rel:"noopener noreferrer"},D=l("mapshaper"),H={href:"http://extra.amcharts.com/mapparser3/",target:"_blank",rel:"noopener noreferrer"},K=l("amMap parser"),P={href:"https://github.com/mbloch/mapshaper/issues/199",target:"_blank",rel:"noopener noreferrer"},Q=l("Additional attribute for SVG output #199");p.render=function(n,l){const p=a("OutboundLink");return e(),r(t,null,[s,o("p",null,[h,i,d,c,u,m,g,f,b,o("a",v,[x,o(p)])]),_,o("p",null,[w,o("a",S,[k,o(p)]),G]),o("ul",null,[M,o("li",null,[o("p",null,[q,o("a",I,[A,o(p)]),j]),o("ul",null,[E,o("li",null,[N,o("a",C,[Z,o(p)]),y])])])]),F,o("ul",null,[o("li",null,[o("a",J,[L,o(p)])]),o("li",null,[o("a",O,[U,o(p)])]),o("li",null,[o("a",V,[z,o(p)])]),o("li",null,[o("a",B,[D,o(p)])]),o("li",null,[o("a",H,[K,o(p)])]),o("li",null,[o("a",P,[Q,o(p)])])])],64)};export default p;
