<!DOCTYPE html>
<html lang="en-US">
  <head>
    <title>部署前端静态文件的简单步骤 | 落羽</title><meta name="description" content=""><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.22">
    <link rel="modulepreload" href="/blog/assets/app.2599e180.js"><link rel="modulepreload" href="/blog/assets/simple-deploy-static-file.html.62d5efcf.js"><link rel="modulepreload" href="/blog/assets/simple-deploy-static-file.html.d1758784.js">
    <link rel="stylesheet" href="/blog/assets/style.662ba6dd.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/blog/" class=""><!----><span class="site-name">落羽</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/blog/front-end/" class="nav-link" aria-label="前端学习"><!--[--><!--]--> 前端学习 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/blog/others/" class="nav-link router-link-active" aria-label="杂"><!--[--><!--]--> 杂 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/blog/front-end/" class="nav-link" aria-label="前端学习"><!--[--><!--]--> 前端学习 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/blog/others/" class="nav-link router-link-active" aria-label="杂"><!--[--><!--]--> 杂 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><a href="/blog/others/svn-cheatsheet.html" class="nav-link sidebar-heading sidebar-item" aria-label="SVN Cheatsheet"><!--[--><!--]--> SVN Cheatsheet <!--[--><!--]--></a><!----><!--]--><!--[--><a aria-current="page" href="/blog/others/simple-deploy-static-file.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-heading sidebar-item active" aria-label="部署前端静态文件的简单步骤"><!--[--><!--]--> 部署前端静态文件的简单步骤 <!--[--><!--]--></a><ul class=""><li><!--[--><a aria-current="page" href="/blog/others/simple-deploy-static-file.html#_1-打包构建" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="1. 打包构建"><!--[--><!--]--> 1. 打包构建 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/others/simple-deploy-static-file.html#_2-tar打包" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="2. tar打包"><!--[--><!--]--> 2. tar打包 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/blog/others/simple-deploy-static-file.html#压缩" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="压缩"><!--[--><!--]--> 压缩 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/blog/others/simple-deploy-static-file.html#_3-scp-上传-tar-包" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="3. scp 上传 tar 包"><!--[--><!--]--> 3. scp 上传 tar 包 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/others/simple-deploy-static-file.html#_4-ssh-到目标机器" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="4. ssh 到目标机器"><!--[--><!--]--> 4. ssh 到目标机器 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/blog/others/simple-deploy-static-file.html#避免重复输入密码" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="避免重复输入密码"><!--[--><!--]--> 避免重复输入密码 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/others/simple-deploy-static-file.html#移除过期的指纹" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="移除过期的指纹"><!--[--><!--]--> 移除过期的指纹 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/blog/others/simple-deploy-static-file.html#_5-解压-tar-包" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="5. 解压 tar 包"><!--[--><!--]--> 5. 解压 tar 包 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/others/simple-deploy-static-file.html#节省手动操作" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="节省手动操作"><!--[--><!--]--> 节省手动操作 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/others/simple-deploy-static-file.html#进一步节省操作" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="进一步节省操作"><!--[--><!--]--> 进一步节省操作 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/blog/others/simple-deploy-static-file.html#参考链接" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="参考链接"><!--[--><!--]--> 参考链接 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/blog/others/deploy-blog-with-github-actions.html" class="nav-link sidebar-heading sidebar-item" aria-label="使用 GitHub Actions 部署博客到 GitHub Pages"><!--[--><!--]--> 使用 GitHub Actions 部署博客到 GitHub Pages <!--[--><!--]--></a><!----><!--]--><!--]--></ul><!--[--><!--]--></aside><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="部署前端静态文件的简单步骤" tabindex="-1"><a class="header-anchor" href="#部署前端静态文件的简单步骤" aria-hidden="true">#</a> 部署前端静态文件的简单步骤</h1><p>笔者目前使用 Vue 开发，开发完成后需要构建静态文件，部署到服务器上，例如 Nginx, 本文将介绍从构建到部署过程中的步骤， 涉及到的一些命令 如 <code>tar</code>, <code>ssh</code>, <code>scp</code>, 以及笔者的一些小技巧。</p><h2 id="_1-打包构建" tabindex="-1"><a class="header-anchor" href="#_1-打包构建" aria-hidden="true">#</a> 1. 打包构建</h2><p>执行你项目中的打包命令进行打包即可，也许是<code>yarn build</code>， 也许是<code>npm run build</code>, 具体可以看<code>package.json</code>中<code>scripts</code>中的 定义。如果没有定义，则翻阅文档找找构建工具的构建命令即可，例如这是<a href="https://cn.vitejs.dev/guide/static-deploy.html" target="_blank" rel="noopener noreferrer">Vite的构建部署文档<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>。</p><p>在构建前需要注意的：</p><ul><li>最好执行 <code>yarn</code>/<code>npm install</code> 安装当前<code>package.json</code>中指定的最新依赖，避免其他同事更新了依赖，但本地还没更新的问题</li><li>也许你需要打上一个版本号，方便跟踪当前的版本。(关于版本号定义，可以参考<a href="https://semver.org/lang/zh-CN/" target="_blank" rel="noopener noreferrer">语义化版本<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>)</li><li>也许你还需要设置一些部署时的环境变量或配置</li><li>...</li></ul><h2 id="_2-tar打包" tabindex="-1"><a class="header-anchor" href="#_2-tar打包" aria-hidden="true">#</a> 2. tar打包</h2><p>当执行完构建后， 在某个目录下，会生成若干的静态文件，把静态文件上传到服务器上对应的目录，即可以通过服务器访问构建好的静态文件了。</p><p>在上传时，如果一个一个文件上传，会有些麻烦， 我们可以先将这些静态文件打包成一个 tar 包再一次性上传。</p><h3 id="压缩" tabindex="-1"><a class="header-anchor" href="#压缩" aria-hidden="true">#</a> 压缩</h3><p>进入到静态文件所在的目录</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> path/to/dist
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>将静态文件压缩为一个 tar 包</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">tar</span> -zcvf build_1.0.tar.gz *
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>参数解释：</p><ul><li><code>-c</code> 表示创建，等同于<code>--create</code></li><li><code>-v</code> 显示打包时的详细输出</li><li><code>-z</code> 使用Gzip对打包文件进行压缩</li><li><code>-f</code> 指定打包后的文件名</li><li><code>*</code> 表示打包当前目录下的所有文件，你也可以指定一个一个的文件进行打包</li></ul><h2 id="_3-scp-上传-tar-包" tabindex="-1"><a class="header-anchor" href="#_3-scp-上传-tar-包" aria-hidden="true">#</a> 3. scp 上传 tar 包</h2><p>打包完之后，需要把 tar 包上传到服务器，可以使用 <code>scp</code> 命令， 假设要上传到 <code>1.1.1.1</code> 上的 <code>/home</code> 目录, 使用 <code>1.1.1.1</code> 的 <code>root</code>用户。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>scp path/to/tar root@1.1.1.1:/home 
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>命令解释：</p><ul><li>命令格式: <code>scp source copy</code> 从<code>source</code>传到<code>copy</code></li><li><code>path/to/tar</code> tar 包所在的路径</li><li><code>root@1.1.1.1:/home</code> 要上传的位置 <ul><li><code>root@1.1.1.1</code> 使用<code>root</code>登录<code>1.1.1.1</code>，进行连接</li><li><code>:</code> 分隔目标机器和目录</li><li><code>/home</code> 上传到机器上的目录</li></ul></li></ul><h2 id="_4-ssh-到目标机器" tabindex="-1"><a class="header-anchor" href="#_4-ssh-到目标机器" aria-hidden="true">#</a> 4. ssh 到目标机器</h2><p>要解压目标机器上的 tar 包，先要连接到目标机器，可以使用 <code>ssh</code> 命令。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">ssh</span> root@1.1.1.1
The authenticity of <span class="token function">host</span> <span class="token string">&#39;1.1.1.1 (1.1.1.1)&#39;</span> can&#39;t be established.
ECDSA key fingerprint is SHA256:2CDXn8/+GTFrUT7ayu0BRrKAVShN7P13wO0bSJdSAW4.
Are you sure you want to <span class="token builtin class-name">continue</span> connecting <span class="token punctuation">(</span>yes/no/<span class="token punctuation">[</span>fingerprint<span class="token punctuation">]</span><span class="token punctuation">)</span>?
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>命令解释:</p><ul><li>使用<code>root</code>用户通过<code>ssh</code>连接<code>1.1.1.1</code>的机器</li><li>这里需要确认服务器的指纹，输入<code>yes</code>就好了 (不过出于安全考虑，你也可以验证一下这个指纹对不对，确定是你要连接的目标机器) <ul><li>这里是因为机器之前没连接过，要把目标机器的公钥存储到下来， 用来下次识别目标机器</li></ul></li></ul><h3 id="避免重复输入密码" tabindex="-1"><a class="header-anchor" href="#避免重复输入密码" aria-hidden="true">#</a> 避免重复输入密码</h3><p>每次使用 <code>ssh</code> 命令，都要重新输入一次密码，着实麻烦，通过把 <code>ssh</code> 密钥存到服务器上，可以避免每次连接时输入密码。</p><p>生成密钥</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> ssh-keygen

Generating public/private rsa key pair.
Enter <span class="token function">file</span> <span class="token keyword">in</span> <span class="token function">which</span> to save the key <span class="token punctuation">(</span>path/to/.ssh/id_rsa<span class="token punctuation">)</span>:
<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>执行完成后，在你指定的路径，如 <code>path/to/.ssh/id_rsa</code>中，会生成一个密钥，接下来把密钥复制到服务器上，那服务器就认识 我们的机器，就不需要重复输入密码了。</p><p>上传密钥到服务器，让服务器存储起来:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ssh-copy-id -i path/to/.ssh/id_rsa.pub root@1.1.1.1
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>参数解释：</p><ul><li><code>-i</code> 指定密钥文件，注意，这里的密钥文件对应的是<strong>公钥</strong>，以<code>.pub</code>结尾的密钥文件</li><li><code>path/to/.ssh/id_rsa.pub</code> 传给服务器的公钥</li><li><code>root@1.1.1.1</code> 要上传的目标机器</li></ul><p>第一次执行，还需要输入一次命令，后面就不用啦。</p><h3 id="移除过期的指纹" tabindex="-1"><a class="header-anchor" href="#移除过期的指纹" aria-hidden="true">#</a> 移除过期的指纹</h3><p>前面使用 <code>ssh</code> 连接的时候, 需要确认<code>fingerprint</code>，一般会被保存在 <code>~/.ssh/known_host</code> 文件下（笔者是Mac系统，不同系统存放位置可能有差异）</p><p>有时，目标机器可能重装了，或者目标机器的公钥发生了变化，存储在 <code>~/.ssh/known_host</code> 的目标机器的公钥就失效了。</p><p>解决办法就是打开<code>~/.ssh/known_host</code>， 删除掉对应机器的公钥，重新用<code>ssh</code>连接机器，存储一个新的公钥就好了。</p><h2 id="_5-解压-tar-包" tabindex="-1"><a class="header-anchor" href="#_5-解压-tar-包" aria-hidden="true">#</a> 5. 解压 tar 包</h2><p>当上传到服务器上后，需要把静态文件从 tar 包中解压出来， 你需要把文件解压到服务器指定的目录下，具体要看你服务器如何配置的。</p><p>假设你使用的是 Nginx， 查看 Nginx 配置， 可以知道要把 tar 包解压到什么目录。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>    <span class="token punctuation">..</span>.

    server <span class="token punctuation">{</span>
        listen       <span class="token number">9999</span><span class="token punctuation">;</span>
        server_name  localhost<span class="token punctuation">;</span>

        <span class="token comment">#charset koi8-r;</span>

        <span class="token comment">#access_log  logs/host.access.log  main;</span>

        location / <span class="token punctuation">{</span>
            <span class="token comment"># 这里指定了静态文件所在的文件路径</span>
            root /home/hello-world<span class="token punctuation">;</span> 
            index index.html index.htm<span class="token punctuation">;</span>
            try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">#error_page  404              /404.html;</span>

        <span class="token comment"># redirect server error pages to the static page /50x.html</span>
        <span class="token comment">#</span>
        error_page   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html<span class="token punctuation">;</span>
        location <span class="token operator">=</span> /50x.html <span class="token punctuation">{</span>
            root   html<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">..</span>.
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>进入到对应的目录</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> path/to/static_file_folder
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>执行解压命令</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">tar</span> -xvf build.1.0.tar.gz 
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>参数解释：</p><ul><li><code>-x</code> 将 tar 包内容解压，等同于 <code>--extract</code></li></ul><p>至此，静态文件的上传已经完成，你应该能够通过服务器访问到这些静态文件了。</p><h2 id="节省手动操作" tabindex="-1"><a class="header-anchor" href="#节省手动操作" aria-hidden="true">#</a> 节省手动操作</h2><p>上面那么多的步骤，每次都要部署都操作一次，也是有些麻烦，那能不能节省这些操作，一步完成呢？</p><p>结合 bash 脚本，把上面的命令组合一下，就可以实现了。</p><p>如将以下脚本保存为<code>tar.sh</code>, 只要执行<code>./tar.sh</code>即可完成打包部署的步骤。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env sh</span>

<span class="token comment"># abort on errors</span>
<span class="token builtin class-name">set</span> -e

<span class="token comment"># install 更新依赖</span>
<span class="token function">yarn</span>

<span class="token comment"># build 构建</span>
<span class="token function">yarn</span> build

<span class="token builtin class-name">echo</span> <span class="token string">&quot;Build finish!&quot;</span>

<span class="token comment"># navigate into the build output directory</span>
<span class="token builtin class-name">cd</span> dist/

    <span class="token builtin class-name">echo</span> <span class="token string">&quot;tar start&quot;</span>

<span class="token comment"># 打包压缩构建后的静态文件</span>
<span class="token function">tar</span> zcvf build.tar.gz *

<span class="token builtin class-name">echo</span> <span class="token string">&quot;tar finish&quot;</span>

<span class="token builtin class-name">echo</span> <span class="token string">&#39;upload to 1.1.1.1 and untar&#39;</span>

<span class="token comment"># 上传tar包到目标机器，并解压到对应的目录</span>
<span class="token function">ssh</span> root@1.1.1.1 <span class="token string">&quot;tar -C /home/hello-world -xz -f-&quot;</span> <span class="token operator">&lt;</span> build.tar.gz

<span class="token builtin class-name">echo</span> <span class="token string">&#39;upload &amp; untar done&#39;</span>

<span class="token builtin class-name">cd</span> -
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>关于 Bash 脚本怎么写，可以看看<a href="https://wangdoc.com/bash/" target="_blank" rel="noopener noreferrer">Bash 脚本教程<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>， 这里解释一下其中的某行脚本：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">ssh</span> root@1.1.1.1 <span class="token string">&quot;tar -C /home/hello-world -xz -f-&quot;</span> <span class="token operator">&lt;</span> build.tar.gz
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li><code>ssh root@1.1.1.1</code> 连接机器, 参考<a href="#%E9%81%BF%E5%85%8D%E9%87%8D%E5%A4%8D%E8%BE%93%E5%85%A5%E5%AF%86%E7%A0%81">避免重复输入密码</a>设置免密码登录</li><li><code>&quot;tar -C /home/hello-world -xz -f-&quot;</code> 连接机器后执行 tar 解压 <ul><li><code>-C</code> 指定解压到什么目录</li><li><code>-xz</code> 执行解压</li><li><code>-f</code> 指定解压的tar包</li><li><code>-</code> 从标准输入中读取, 即读取<code>build.tar.gz</code></li></ul></li><li><code>&lt; build.tar.gz</code> 作为tar命令的输入</li></ul><h2 id="进一步节省操作" tabindex="-1"><a class="header-anchor" href="#进一步节省操作" aria-hidden="true">#</a> 进一步节省操作</h2><p>尽管写了bash脚本，简单的执行一下就能完成部署了，但每次还要手动执行一下。</p><p>能不能每次提交时执行呢？使用一些CI工具就可以实现了，例如<a href="https://docs.github.com/en/actions" target="_blank" rel="noopener noreferrer">GitHub Actions<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>， <a href="https://www.travis-ci.com/" target="_blank" rel="noopener noreferrer">Travis CI<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>等。</p><p>笔者使用<code>GitHub Actions</code>实现了博客的自动部署，也许可以给你一些<a href="https://spike-leung.github.io/blog/others/deploy-blog-with-github-actions.html" target="_blank" rel="noopener noreferrer">参考<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>。</p><p>此处不做展开，读者可自行探索 😃</p><h2 id="参考链接" tabindex="-1"><a class="header-anchor" href="#参考链接" aria-hidden="true">#</a> 参考链接</h2><ul><li><a href="https://wangdoc.com/ssh/index.html" target="_blank" rel="noopener noreferrer">ssh 教程<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li><a href="https://wangdoc.com/bash/" target="_blank" rel="noopener noreferrer">Bash 脚本教程<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li><a href="https://www.thegeekdiary.com/how-to-avoid-ssh-from-prompting-key-passphrase-for-passwordless-logins/" target="_blank" rel="noopener noreferrer">How to avoid ssh from prompting key passphrase for passwordless logins<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li></ul><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">10/10/2021, 11:32:52 AM</span></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/blog/others/svn-cheatsheet.html" class="nav-link" aria-label="SVN Cheatsheet"><!--[--><!--]--> SVN Cheatsheet <!--[--><!--]--></a></span><span class="next"><a href="/blog/others/deploy-blog-with-github-actions.html" class="nav-link" aria-label="使用 GitHub Actions 部署博客到 GitHub Pages"><!--[--><!--]--> 使用 GitHub Actions 部署博客到 GitHub Pages <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main></div><!----><!--]--></div>
    <script type="module" src="/blog/assets/app.2599e180.js" defer></script>
  </body>
</html>
